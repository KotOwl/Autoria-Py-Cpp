<!-- FILE: frontend/templates/my_listings.html -->
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ—ó –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è - AutoRia Clone</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .navbar {
            background: white;
            padding: 15px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .navbar h1 {
            color: #667eea;
            font-size: 24px;
        }
        .nav-links {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .nav-links a {
            color: #667eea;
            text-decoration: none;
        }
        .nav-links a:hover {
            text-decoration: underline;
        }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            text-decoration: none;
            display: inline-block;
        }
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }
        .filters {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .filters h3 {
            margin-bottom: 15px;
            color: #333;
        }
        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        .filter-group label {
            margin-bottom: 5px;
            color: #666;
            font-size: 14px;
        }
        .filter-group input,
        .filter-group select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        .filter-buttons {
            display: flex;
            gap: 10px;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-primary:hover {
            background: #5568d3;
        }
        .listing-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }
        .listing-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }
        .listing-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 20px;
        }
        .listing-card p {
            color: #666;
            margin: 5px 0;
        }
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status-active {
            background: #28a745;
            color: white;
        }
        .status-pending {
            background: #ffc107;
            color: #333;
        }
        .status-rejected {
            background: #dc3545;
            color: white;
        }
        .price {
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
            margin-top: 10px;
        }
        .empty-state {
            background: white;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            color: #666;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <h1><a href="/" style="color: #667eea; text-decoration: none;">üöó AutoRia Clone</a></h1>
        <div class="nav-links">
            <a href="/">–ì–æ–ª–æ–≤–Ω–∞</a>
            <a href="/profile">–ü—Ä–æ—Ñ—ñ–ª—å</a>
            <a href="/logout" class="btn btn-secondary">–í–∏—Ö—ñ–¥</a>
        </div>
    </nav>

    <div class="container">
        <h2 style="color: white; margin-bottom: 20px;">–ú–æ—ó –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è</h2>
        
        <div class="filters">
            <h3>–§—ñ–ª—å—Ç—Ä–∏</h3>
            <form method="GET" action="/my-listings">
                <div class="filter-row">
                    <div class="filter-group">
                        <label>–ú–∞—Ä–∫–∞</label>
                        <select name="brand">
                            <option value="">–í—Å—ñ –º–∞—Ä–∫–∏</option>
                            {% for brand in brands %}
                            <option value="{{ brand.id }}" {% if request.args.get('brand') == brand.id|string %}selected{% endif %}>
                                {{ brand.name }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>–°—Ç–∞—Ç—É—Å</label>
                        <select name="status">
                            <option value="">–í—Å—ñ —Å—Ç–∞—Ç—É—Å–∏</option>
                            <option value="active" {% if request.args.get('status') == 'active' %}selected{% endif %}>–ê–∫—Ç–∏–≤–Ω—ñ</option>
                            <option value="pending" {% if request.args.get('status') == 'pending' %}selected{% endif %}>–ù–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó</option>
                            <option value="rejected" {% if request.args.get('status') == 'rejected' %}selected{% endif %}>–í—ñ–¥—Ö–∏–ª–µ–Ω—ñ</option>
                            <option value="inactive" {% if request.args.get('status') == 'inactive' %}selected{% endif %}>–ù–µ–∞–∫—Ç–∏–≤–Ω—ñ</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∞ —Ü—ñ–Ω–∞</label>
                        <input type="number" name="min_price" value="{{ request.args.get('min_price', '') }}" placeholder="0">
                    </div>
                    <div class="filter-group">
                        <label>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ —Ü—ñ–Ω–∞</label>
                        <input type="number" name="max_price" value="{{ request.args.get('max_price', '') }}" placeholder="1000000">
                    </div>
                </div>
                <div class="filter-buttons">
                    <button type="submit" class="btn btn-primary">–ó–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∏</button>
                    <a href="/my-listings" class="btn btn-secondary">–°–∫–∏–Ω—É—Ç–∏</a>
                </div>
            </form>
        </div>

        {% if listings %}
            {% for listing in listings %}
                {% set brand_name = listing.get('brandName', '–ú–∞—Ä–∫–∞') %}
                {% set model_name = listing.get('modelName', '–ú–æ–¥–µ–ª—å') %}
                {% set status = listing.get('status', 'unknown') %}
                
                <div class="listing-card">
                    <div onclick="window.location.href='/listing/{{ listing.id }}'" style="cursor: pointer;">
                        <h3>{{ brand_name }} {{ model_name }}
                            <span class="status-badge status-{{ status }}">
                                {% if status == 'active' %}–ê–∫—Ç–∏–≤–Ω–µ
                                {% elif status == 'pending' %}–ù–∞ –º–æ–¥–µ—Ä–∞—Ü—ñ—ó
                                {% elif status == 'rejected' %}–í—ñ–¥—Ö–∏–ª–µ–Ω–µ
                                {% elif status == 'inactive' %}–ù–µ–∞–∫—Ç–∏–≤–Ω–µ
                                {% elif status == 'sold' %}–ü—Ä–æ–¥–∞–Ω–æ
                                {% else %}{{ status }}
                                {% endif %}
                            </span>
                        </h3>
                        <p><strong>–†—ñ–∫:</strong> {{ listing.year }}</p>
                        <p><strong>–†–µ–≥—ñ–æ–Ω:</strong> {% if listing.get('region') and listing.get('region')|trim %}{{ listing.get('region') }}{% elif listing.region and listing.region|trim %}{{ listing.region }}{% else %}–ù–µ –≤–∫–∞–∑–∞–Ω–æ{% endif %}</p>
                        <p><strong>–ü—Ä–æ–±—ñ–≥:</strong> {{ listing.mileage }} –∫–º</p>
                        <div class="price">
                            {{ listing.price }} {{ listing.currency }}
                            ({{ "%.2f"|format(listing.priceUSD) }} USD, 
                             {{ "%.2f"|format(listing.priceEUR) }} EUR, 
                             {{ "%.2f"|format(listing.priceUAH) }} UAH)
                        </div>
                        <p style="margin-top: 10px; color: #999; font-size: 12px;">
                            –ü–µ—Ä–µ–≥–ª—è–¥—ñ–≤: {{ listing.viewCount }} | –†–µ–¥–∞–≥—É–≤–∞–Ω—å: {{ listing.editCount }}
                        </p>
                    </div>
                    <div style="margin-top: 15px; display: flex; gap: 10px; border-top: 1px solid #eee; padding-top: 15px;">
                        <a href="/listing/{{ listing.id }}/edit" class="btn" style="background: #667eea; color: white; padding: 8px 16px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; text-decoration: none;">
                            –†–µ–¥–∞–≥—É–≤–∞—Ç–∏
                        </a>
                        <form method="POST" action="/listing/{{ listing.id }}/delete" style="display: inline;" onsubmit="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è?');">
                            <button type="submit" class="btn" style="background: #dc3545; color: white; padding: 8px 16px; border: none; border-radius: 5px; cursor: pointer; font-size: 14px;">
                                –í–∏–¥–∞–ª–∏—Ç–∏
                            </button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        {% else %}
        <div class="empty-state">
            <h2>–£ –≤–∞—Å –ø–æ–∫–∏ –Ω–µ–º–∞—î –æ–≥–æ–ª–æ—à–µ–Ω—å</h2>
            <p>–°—Ç–≤–æ—Ä—ñ—Ç—å –ø–µ—Ä—à–µ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –¥–ª—è –ø—Ä–æ–¥–∞–∂—É –∞–≤—Ç–æ–º–æ–±—ñ–ª—è</p>
        </div>
        {% endif %}
    </div>
</body>
</html>

