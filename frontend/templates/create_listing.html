<!-- FILE: frontend/templates/create_listing.html -->
<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è - AutoRia Clone</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .navbar {
            background: white;
            padding: 15px 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .navbar h1 {
            color: #667eea;
            font-size: 24px;
        }
        .nav-links {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .nav-links a {
            color: #667eea;
            text-decoration: none;
        }
        .container {
            max-width: 800px;
            margin: 30px auto;
            padding: 0 20px;
        }
        .form-card {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 500;
        }
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-primary:hover {
            background: #5568d3;
        }
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        .error {
            background: #fee;
            color: #c33;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <h1><a href="/" style="color: #667eea; text-decoration: none;">üöó AutoRia Clone</a></h1>
        <div class="nav-links">
            <a href="/">–ì–æ–ª–æ–≤–Ω–∞</a>
            <a href="/my-listings">–ú–æ—ó –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è</a>
            <a href="/profile">–ü—Ä–æ—Ñ—ñ–ª—å</a>
        </div>
    </nav>

    <div class="container">
        <div class="form-card">
            <h2 style="margin-bottom: 20px; color: #333;">–°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è</h2>
            
            {% if error %}
            <div class="error">{{ error }}</div>
            {% endif %}
            
            <form method="POST" action="/create-listing">
                <div class="form-group">
                    <label>–ú–∞—Ä–∫–∞ *</label>
                    <select name="brand_id" id="brand_id" required onchange="loadModels()">
                        <option value="">–û–±–µ—Ä—ñ—Ç—å –º–∞—Ä–∫—É</option>
                        {% for brand in brands %}
                        <option value="{{ brand.id }}">{{ brand.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–ú–æ–¥–µ–ª—å *</label>
                    <select name="model_id" id="model_id" required>
                        <option value="">–°–ø–æ—á–∞—Ç–∫—É –æ–±–µ—Ä—ñ—Ç—å –º–∞—Ä–∫—É</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>–†—ñ–∫ –≤–∏–ø—É—Å–∫—É *</label>
                        <input type="number" name="year" min="1900" max="2025" required>
                    </div>
                    <div class="form-group">
                        <label>–ü—Ä–æ–±—ñ–≥ (–∫–º) *</label>
                        <input type="number" name="mileage" min="0" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>–¶—ñ–Ω–∞ *</label>
                        <input type="number" name="price" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label>–í–∞–ª—é—Ç–∞ *</label>
                        <select name="currency" required>
                            <option value="UAH">UAH</option>
                            <option value="USD">USD</option>
                            <option value="EUR">EUR</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>–†–µ–≥—ñ–æ–Ω *</label>
                    <select name="region" required>
                        <option value="">–û–±–µ—Ä—ñ—Ç—å —Ä–µ–≥—ñ–æ–Ω</option>
                        <option value="–ö–∏—ó–≤">–ö–∏—ó–≤</option>
                        <option value="–ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–ö–∏—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–õ—å–≤—ñ–≤">–õ—å–≤—ñ–≤</option>
                        <option value="–õ—å–≤—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–õ—å–≤—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–û–¥–µ—Å–∞">–û–¥–µ—Å–∞</option>
                        <option value="–û–¥–µ—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–û–¥–µ—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–•–∞—Ä–∫—ñ–≤">–•–∞—Ä–∫—ñ–≤</option>
                        <option value="–•–∞—Ä–∫—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–•–∞—Ä–∫—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–î–Ω—ñ–ø—Ä–æ">–î–Ω—ñ–ø—Ä–æ</option>
                        <option value="–î–Ω—ñ–ø—Ä–æ–ø–µ—Ç—Ä–æ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–î–Ω—ñ–ø—Ä–æ–ø–µ—Ç—Ä–æ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–ó–∞–ø–æ—Ä—ñ–∂–∂—è">–ó–∞–ø–æ—Ä—ñ–∂–∂—è</option>
                        <option value="–ó–∞–ø–æ—Ä—ñ–∑—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–ó–∞–ø–æ—Ä—ñ–∑—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–í—ñ–Ω–Ω–∏—Ü—è">–í—ñ–Ω–Ω–∏—Ü—è</option>
                        <option value="–í—ñ–Ω–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–í—ñ–Ω–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–ñ–∏—Ç–æ–º–∏—Ä">–ñ–∏—Ç–æ–º–∏—Ä</option>
                        <option value="–ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫">–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫</option>
                        <option value="–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–Ü–≤–∞–Ω–æ-–§—Ä–∞–Ω–∫—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–ö—Ä–æ–ø–∏–≤–Ω–∏—Ü—å–∫–∏–π">–ö—Ä–æ–ø–∏–≤–Ω–∏—Ü—å–∫–∏–π</option>
                        <option value="–ö—ñ—Ä–æ–≤–æ–≥—Ä–∞–¥—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–ö—ñ—Ä–æ–≤–æ–≥—Ä–∞–¥—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–õ—É—Ü—å–∫">–õ—É—Ü—å–∫</option>
                        <option value="–í–æ–ª–∏–Ω—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–í–æ–ª–∏–Ω—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–ú–∏–∫–æ–ª–∞—ó–≤">–ú–∏–∫–æ–ª–∞—ó–≤</option>
                        <option value="–ú–∏–∫–æ–ª–∞—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–ú–∏–∫–æ–ª–∞—ó–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–ü–æ–ª—Ç–∞–≤–∞">–ü–æ–ª—Ç–∞–≤–∞</option>
                        <option value="–ü–æ–ª—Ç–∞–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–ü–æ–ª—Ç–∞–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–†—ñ–≤–Ω–µ">–†—ñ–≤–Ω–µ</option>
                        <option value="–†—ñ–≤–Ω–µ–Ω—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–†—ñ–≤–Ω–µ–Ω—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–°—É–º–∏">–°—É–º–∏</option>
                        <option value="–°—É–º—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–°—É–º—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–¢–µ—Ä–Ω–æ–ø—ñ–ª—å">–¢–µ—Ä–Ω–æ–ø—ñ–ª—å</option>
                        <option value="–¢–µ—Ä–Ω–æ–ø—ñ–ª—å—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–¢–µ—Ä–Ω–æ–ø—ñ–ª—å—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–£–∂–≥–æ—Ä–æ–¥">–£–∂–≥–æ—Ä–æ–¥</option>
                        <option value="–ó–∞–∫–∞—Ä–ø–∞—Ç—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–ó–∞–∫–∞—Ä–ø–∞—Ç—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∏–π">–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∏–π</option>
                        <option value="–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–•–º–µ–ª—å–Ω–∏—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–ß–µ—Ä–∫–∞—Å–∏">–ß–µ—Ä–∫–∞—Å–∏</option>
                        <option value="–ß–µ—Ä–∫–∞—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–ß–µ—Ä–∫–∞—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–ß–µ—Ä–Ω—ñ–≤—Ü—ñ">–ß–µ—Ä–Ω—ñ–≤—Ü—ñ</option>
                        <option value="–ß–µ—Ä–Ω—ñ–≤–µ—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–ß–µ—Ä–Ω—ñ–≤–µ—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–ß–µ—Ä–Ω—ñ–≥—ñ–≤">–ß–µ—Ä–Ω—ñ–≥—ñ–≤</option>
                        <option value="–ß–µ—Ä–Ω—ñ–≥—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–ß–µ—Ä–Ω—ñ–≥—ñ–≤—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–î–æ–Ω–µ—Ü—å–∫">–î–æ–Ω–µ—Ü—å–∫</option>
                        <option value="–î–æ–Ω–µ—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–î–æ–Ω–µ—Ü—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–õ—É–≥–∞–Ω—Å—å–∫">–õ—É–≥–∞–Ω—Å—å–∫</option>
                        <option value="–õ—É–≥–∞–Ω—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å">–õ—É–≥–∞–Ω—Å—å–∫–∞ –æ–±–ª–∞—Å—Ç—å</option>
                        <option value="–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å">–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å</option>
                        <option value="–ê–† –ö—Ä–∏–º">–ê–† –ö—Ä–∏–º</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–û–ø–∏—Å *</label>
                    <textarea name="description" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>–¢–∏–ø –ø–∞–ª–∏–≤–∞</label>
                        <select name="fuel_type">
                            <option value="">–ù–µ –≤–∫–∞–∑–∞–Ω–æ</option>
                            <option value="petrol">–ë–µ–Ω–∑–∏–Ω</option>
                            <option value="diesel">–î–∏–∑–µ–ª—å</option>
                            <option value="electric">–ï–ª–µ–∫—Ç—Ä–∏–∫–∞</option>
                            <option value="hybrid">–ì—ñ–±—Ä–∏–¥</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>–ö–æ—Ä–æ–±–∫–∞ –ø–µ—Ä–µ–¥–∞—á</label>
                        <select name="transmission">
                            <option value="">–ù–µ –≤–∫–∞–∑–∞–Ω–æ</option>
                            <option value="manual">–ú–µ—Ö–∞–Ω—ñ—á–Ω–∞</option>
                            <option value="automatic">–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞</option>
                            <option value="robot">–†–æ–±–æ—Ç</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>–ö–æ–ª—ñ—Ä</label>
                        <input type="text" name="color" placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –ß–æ—Ä–Ω–∏–π">
                    </div>
                    <div class="form-group">
                        <label>–¢–∏–ø –∫—É–∑–æ–≤–∞</label>
                        <select name="body_type">
                            <option value="">–ù–µ –≤–∫–∞–∑–∞–Ω–æ</option>
                            <option value="sedan">–°–µ–¥–∞–Ω</option>
                            <option value="hatchback">–•–µ—Ç—á–±–µ–∫</option>
                            <option value="suv">SUV</option>
                            <option value="coupe">–ö—É–ø–µ</option>
                            <option value="wagon">–£–Ω—ñ–≤–µ—Ä—Å–∞–ª</option>
                            <option value="van">–§—É—Ä–≥–æ–Ω</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>–û–±'—î–º –¥–≤–∏–≥—É–Ω–∞ (–ª)</label>
                        <input type="number" name="engine_volume" step="0.1" min="0" placeholder="2.0">
                    </div>
                    <div class="form-group">
                        <label>–ü–æ—Ç—É–∂–Ω—ñ—Å—Ç—å (–∫.—Å.)</label>
                        <input type="number" name="engine_power" min="0" placeholder="150">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–≤–µ—Ä–µ–π</label>
                    <select name="doors_count">
                        <option value="">–ù–µ –≤–∫–∞–∑–∞–Ω–æ</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>–§–æ—Ç–æ–≥—Ä–∞—Ñ—ñ—ó (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)</label>
                    <input type="file" name="photos" multiple accept="image/*" id="photo-input" onchange="previewPhotos(this)">
                    <p style="color: #666; font-size: 12px; margin-top: 5px;">–ú–æ–∂–Ω–∞ –≤–∏–±—Ä–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ñ–∞–π–ª—ñ–≤ (–º–∞–∫—Å. 10)</p>
                    <div id="photo-preview" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; margin-top: 15px;"></div>
                </div>
                
                <script>
                function previewPhotos(input) {
                    const preview = document.getElementById('photo-preview');
                    preview.innerHTML = '';
                    
                    if (input.files && input.files.length > 0) {
                        const maxFiles = Math.min(input.files.length, 10);
                        for (let i = 0; i < maxFiles; i++) {
                            const file = input.files[i];
                            if (file.type.startsWith('image/')) {
                                const reader = new FileReader();
                                reader.onload = function(e) {
                                    const div = document.createElement('div');
                                    div.style.cssText = 'position: relative; border-radius: 5px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1);';
                                    div.innerHTML = '<img src="' + e.target.result + '" style="width: 100%; height: 150px; object-fit: cover; display: block;">';
                                    preview.appendChild(div);
                                };
                                reader.readAsDataURL(file);
                            }
                        }
                    }
                }
                </script>
                
                <div style="display: flex; gap: 10px; margin-top: 20px;">
                    <button type="submit" class="btn btn-primary">–°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è</button>
                    <a href="/my-listings" class="btn btn-secondary">–°–∫–∞—Å—É–≤–∞—Ç–∏</a>
                </div>
            </form>
        </div>
    </div>

    <script>
        function loadModels() {
            const brandId = document.getElementById('brand_id').value;
            const modelSelect = document.getElementById('model_id');
            modelSelect.innerHTML = '<option value="">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</option>';
            
            if (!brandId) {
                modelSelect.innerHTML = '<option value="">–°–ø–æ—á–∞—Ç–∫—É –æ–±–µ—Ä—ñ—Ç—å –º–∞—Ä–∫—É</option>';
                return;
            }
            
            fetch(`/api/brands/${brandId}/models`)
                .then(response => response.json())
                .then(models => {
                    modelSelect.innerHTML = '<option value="">–û–±–µ—Ä—ñ—Ç—å –º–æ–¥–µ–ª—å</option>';
                    models.forEach(model => {
                        const option = document.createElement('option');
                        option.value = model.id;
                        option.textContent = model.name;
                        modelSelect.appendChild(option);
                    });
                })
                .catch(error => {
                    console.error('Error loading models:', error);
                    modelSelect.innerHTML = '<option value="">–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</option>';
                });
        }
    </script>
</body>
</html>

